---
Order: 5
Area: remote
TOCTitle: Troubleshooting and FAQ
PageTitle: Visual Studio Code Remote FAQs, tips, and troubleshooting
ContentId: 42e65445-fb3b-4561-8730-bbd19769a160
MetaDescription: Visual Studio Code Remote Development FAQs, tips and troubleshooting for SSH, Containers, and WSL
DateApproved: 2/25/2019
---
# Remote Development Troubleshooting & FAQ

This article covers frequently asked questions and troubleshooting tips and tricks for Visual Studio Code Remote Development extensions. See the primary [SSH](/docs/remote/ssh.md), [Containers](/docs/remote/containers.md), [WSL](/docs/remote/wsl.md) for more details on setting up and working with their capabilities. See [open issues](https://aka.ms/vscode-remote/issues) for additional details on known problems and workarounds.

## General FAQ

### What Linux library dependencies does the VS Code Remote Server have?

Most Linux distributions will not require additional dependency installation steps. Linux hosts need to have Bash (`/bin/bash`), `tar`, and either `curl` or `wget` installed.

### How does it secure access to the remote machine / VM / container?

Visual Studio Code Remote Development uses existing, well known transports like secure shell to authenticate and secure traffic. No ports need to be publicly opened beyond those used by these well-known, secure transports for the capability to function. The VS Code remote server runs as the same user you used to sign into the machine which ensures VS Code and its extensions are not given improper elevated access without permission and is not wired into any user login or startup scripts.

### What are the connectivity requirements for the VS Code Remote Server?

The VS Code Remote Server requires outbound HTTPS (port 443) connectivity to `update.code.visualstudio.com` and `marketplace.visualstudio.com`. All other communication between the server and VS Code client is accomplished through...

- SSH: An authenticated, secure SSH tunnel.
- Containers: An authenticated, random port automatically exposed via the Docker CLI.
- WSL: An authenticated, random local TCP port.

### Is `devcontainer.json` intended to define how an application is deployed?

No. A development container is an environment that you can use to develop your application even before you are ready to build or deploy. While deployment and development containers may resemble one another, you often will not include tools in a deployment image that you will want during development. The set of "dev container definitions" found in the [vscode-dev-containers repo](https://aka.ms/vscode-dev-containers) are intended to help jump start the process of creating a development container by including a set of well-known container build or deployment files and a `devcontainer.json` file. This file provides a home for tooling and edit-time related settings and a pointer to the image (or files that define the image) that should be used for the development container. However, their use is entirely optional, and you can [attach to a running container](#attaching-to-running-containers) in other container-based workflows and scenarios.

### Is `devcontainer.json` intended to define how an application is built? Like Buildpacks?

No. The [Buildpack](https://buildpacks.io/) concept focuses on taking source code and generating deployable container images through a series of defined steps. A dev container is an environment you can use to develop your application even before you are ready to build. They are therefore complementary concepts. The `devcontainer.json` file is not intended to define how your application should be built, but rather provides a home for tooling and edit-time related settings and a pointer to an image or image definition files. Today it supports pointing to an existing image (which could be generated by a Buildpack), a Dockerfile, or one or more `docker-compose.yml` files, but more will be added as the community has interest. In all cases, you can also opt to [attach to a running container](#attaching-to-running-containers) if you prefer to use an alternate container build or deployment workflow.

Similarly, the "dev container definitions" found in the [vscode-dev-containers repo](https://aka.ms/vscode-dev-containers) can help jump start the process of creating a dev container when you do not have an existing image, `Dockerfile`, or `docker-compose.yml`. These can also act as samples if you do have existing container files. However, they are not intended to define how an application should be built.

### Are the Visual Studio Code Remote Development extensions open source?

The Visual Studio Code Remote Development extensions are free to use with an [open roadmap](https://aka.ms/vscode-remote-release), but are not currently open source.

### As an extension author what do I need to do?

The VS Code extension API abstracts many extensions away from any changes so they work without modification. However, given extensions can use any node module or runtime they want, there are situations where adjustments may need to be made. We recommend you should test your extension to be sure that no update are required. See [Adding Remote Development Support to Extensions](/api/advanced-topics/remote-extensions.md) for details.

## SSH Tips

### Configuring key based authentication

> **Azure Linux VM / PuTTY Tip:** If you've already set up key based authentication using PuTTYGen, you will need to convert your private key for use in other SSH clients. See [below](#reusing-a-key-generated-in-puttygen) for details.

You can set up SSH key based authentication for your remote host as follows:

1. Check to see if `~/.ssh/id_rsa.pub` exists on macOS / Linux or `%USERPROFILE%\.ssh\id_rsa.pub` on Windows. If not, run the following command in a terminal / command prompt to generate a SSH key pair:

    ````bash
    ssh-keygen -t rsa -b 4096 -C "your@email-address.here"
    ````

    > **Tip:** Don't have `ssh-keygen`? Install [a supported client](#installing-a-supported-ssh-client).

2. Add the contents of your **local** `id_rsa.pub` file to the appropriate `authorized_keys` file(s) on the remote host. How you do this depends on the operating systems involved.

    **macOS / Linux to macOS / Linux**: Run the following command in a terminal replacing `your-remote-linux-machine` with the host from your SSH config file.

    ````bash
    ssh-copy-id your-remote-linux-machine
    ````

    **Windows to macOS/Linux**: Run the following commands in a command prompt replacing `your-remote-linux-machine` with the host from your SSH config file.

    ````bash
    SET REMOTEHOST=user@your-remote-linux-machine

    scp %USERPROFILE%\.ssh\id_rsa.pub %REMOTEHOST%:~/tmp.pub
    ssh %REMOTEHOST% "mkdir -p ~/.ssh && chmod 700 ~/.ssh && cat ~/tmp.pub >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys && rm -f ~/tmp.pub"
    ````

### Reusing a key generated in PuTTYGen

If you already used PuTTYGen to set up SSH public key authentication for the host you are connecting to, you will need to convert your private key for use in other SSH clients. Simply follow these steps:

1. Load the private key you created back into PuTTYGen
2. Select **Conversions > Export OpenSSH key** and select a location to export the key such as `%USERPROFILE%\.ssh`.
3. Validate that the permissions on the file you exported only grant "Full Control to your user, Administrators, and SYSTEM.
4. Open your SSH `config` file and add an `IdentityFile` keyword with the path to the key file. For example:

    ````
    Host example-azure-vm-with-exported-private-key
        User myuser
        HostName 192.168.0.128
        IdentityFile C:\path\to\your\exported\private\keyfile
    ````

### Enabling alternate SSH authentication methods

If one of the following conditions apply, you will need to enable the `remote.SSH.showLoginTerminal` setting:

- Connecting with 2-factor authentication
- Using password auth
- Using an SSH key with a passphrase when the SSH agent is not running or accessible

This setting will cause the terminal to be shown whenever vscode runs an ssh command. You will have to enter your auth code, password, or passphrase each time. A convenient way to work around this is to enable the `ControlMaster` feature that tells OpenSSH to multiple multiple SSH sessions over a single connection. Enable it in your SSH config file like this:

```
Host *
    ControlMaster auto
    ControlPath  ~/.ssh/sockets/%r@%h-%p
    ControlPersist  600
```

Finally, run `mkdir -p ~/.ssh/sockets` to create the sockets folder.

With this enabled, you will only have to enter your auth code/password/passphrase once.

### Fixing SSH file permission errors

SSH can be very particular about file permissions and you can see errors like "WARNING: UNPROTECTED PRIVATE KEY FILE!" if set incorrectly. Update your permissions as follows.

#### SSH local file and folder permissions

The following are permissions that should be set correctly on your local machine.

| Folder / File | Linux / macOS Permissions | Windows Permissions |
|---------------|---------------------------|---------------------|
| `.ssh` in your user folder | chmod 700 ~/.ssh | Grant "Full Control" to your user, Administrators and SYSTEM. |
| `.ssh/config` in your user folder | chmod 600 ~/.ssh | Grant "Full Control" to your user, Administrators and SYSTEM. |
| `.ssh/id_rsa.pub` in your user folder | chmod 600 ~/.ssh/id_rsa.pub | Grant "Full Control" to your user, Administrators and SYSTEM. |
| Any other key file | chmod 600 /path/to/key/file| Grant "Full Control" to your user, Administrators and SYSTEM.|

#### SSH server file and folder permissions

The following are permissions that need to be correct on the remote machine you are connecting to.

| Folder / File | Linux / macOS Permissions |
|---------------|---------------------------|
| `.ssh` in your user folder on the server | chmod 700 ~/.ssh |
| `.ssh/authorized_keys` in your user folder on the server  | chmod 600 ~/.ssh/authorized_keys |

#### Updating permissions on Windows using the command line

If you'd prefer to use the command line to update permissions on Windows, you can use the `icacls` command. For example, this will set your user as the owner, clear out permissions, disable inheritance, and grant the needed permissions:

```
SET FILEORFOLDERTOUPDATE="%USERPROFILE%\.ssh"

icacls "%FILEORFOLDERTOUPDATE%" /c /setowner %USERDOMAIN%\%USERNAME%
icacls "%FILEORFOLDERTOUPDATE%" /c /reset
icacls "%FILEORFOLDERTOUPDATE%" /c /inheritance:r /grant %USERDOMAIN%\%USERNAME%:F SYSTEM:F BUILTIN\Administrators:F
```

### Installing a supported SSH client

| OS | Instructions |
|----|--------------|
| Windows 10 / Server 2016 | Install the [Windows OpenSSH Client](https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse). |
| Earlier Windows | Install [Git for Windows](https://git-scm.com/download/win) and select the **Use Git and optional Unix tools from the Command Prompt** option or manually add `C:\Program Files\Git\usr\bin` into your PATH. |
| macOS | No steps required. |
| Debian/Ubuntu | Run `sudo apt-get install openssh-client` |
| RHL / Fedora / CentOS | Run `sudo yum install openssh-clients` |

### Installing a supported SSH server

| OS | Instructions |
|----|--------------|
| Debian / Ubuntu | Run `sudo apt-get install openssh-server` |  See [here](https://help.ubuntu.com/community/SSH?action=show) for additional setup instructions. |
| RHL / Fedora / CentOS | Run `sudo yum install openssh-server && sudo systemctl start sshd.service && sudo systemctl enable sshd.service` | You may need to omit `sudo` when running in a container. |
| macOS | Go to **System Preferences** &gt; **Sharing**, check **Remote Login**. | |

## Container Tips

### Enabling file sharing in Docker Desktop

The VS Code Remote - Containers extension can automatically mount your source code into the container if (and only if) it's in an allowed location. You can update this as follows:

1. Right-click on the Docker task bar item and select Settings.
2. On Windows, go to the Shared Drives tab and check the drive(s) where your source code is located. On macOS, go the File Sharing tab and be sure the folder containing your source code is under a file path specified in the list.

### Resolving errors about missing dependencies

Some extensions rely on libraries not found in the certain Docker images. See the [primary containers article](/docs/remote/containers.md#installing-additional-software-in-the-sandbox) for a few options on resolving this issue.

### Connecting to multiple containers

Currently you can only connect to one container per VS Code window. However, you can spin up multiple containers and [attach to them](#attaching-to-running-containers) from different VS Code windows to work around this limitation.

### Using Docker / Kubernetes from inside a dev container

You can use Docker and Kubernetes related CLIs and extensions from inside your development container by forwarding the Docker socket and installing the Docker CLI (and kubectl for Kubernetes) in the container. See the [Docker-in-Docker](https://aka.ms/vscode-remote/samples/docker-in-docker), [Docker-in-Docker Compose](https://aka.ms/vscode-remote/samples/docker-in-docker-compose), and [Kubernetes-Helm](https://aka.ms/vscode-remote/samples/kubernetes-helm) dev container definitions for details.

### Accessing remote containers

If you are remotely running your containers in Docker, you can configure your local `docker` command to connect to the remote machine. However, you'll want to take care in ensuring you're authenticating your connection. This approach is also generally not recommended outside of development environments. You can [read this article](https://www.kevinkuszyk.com/2016/11/28/connect-your-docker-client-to-a-remote-docker-host/) for information on setting this up.

## WSL Tips

### Resolving errors about missing dependencies

Some extensions rely on libraries not found in the vanilla install of certain WSL Linux distributions. You can add additional libraries into your Linux distribution by using its package manager.  For Ubuntu and Debian based distributions, run `sudo apt-get install <package>` to install the needed libraries. Check the documentation for your extension or the runtime that is mentioned for additional installation details.

## Reporting issues

When reporting issues, please file them against the https://github.com/Microsoft/vscode-remote/issues repository.
